<!--
  Generated template for the PasswordResetPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-content padding>
  <div text-right ion-text color="danger" class="close">
    <ion-icon name="close" (click)="login()" isActive="true"></ion-icon>

  </div>
  <ion-title text-center  class="bienvenue">{{"password_reset_pag.title"|translate}}</ion-title>
</ion-content>

<ion-footer>
  <form *ngIf="next==0"  text-center padding   [formGroup]="request_form" (ngSubmit)="request()">
    <ion-item>
      <ion-label   color="primary" floating translate>
        password_reset_pag.login
      </ion-label>
      <ion-input clearInput  formControlName="login"></ion-input>
    </ion-item>
    <div *ngIf="request_form.controls.login.errors && (request_form.controls.login.dirty || request_form.controls.login.touched)">
      <p ion-text
         *ngIf="request_form.controls.login.errors.required"
         color="danger"
         text-left
         translate
      >
        password_reset_pag.login_required
      </p>

    </div>

    <button ion-button block [disabled]="!request_form.valid">{{"password_reset_pag.reset_lab"|translate}}</button>
  </form>
  <form *ngIf="next==1" text-center padding   [formGroup]="reset_form" (ngSubmit)="reset()">
    <ion-item>
      <ion-label   color="primary" floating translate>
        password_reset_pag.code
      </ion-label>
      <ion-input clearInput  formControlName="code"></ion-input>
    </ion-item>
    <div *ngIf="reset_form.controls.code.errors && (reset_form.controls.code.dirty || reset_form.controls.code.touched)">
      <p ion-text
         *ngIf="reset_form.controls.code.errors.required"
         color="danger"
         text-left
         translate
      >
        password_reset_pag.code_required
      </p>

    </div>

    <button ion-button block [disabled]="!reset_form.valid">{{"password_reset_pag.send"|translate}}</button>
  </form>

  <form *ngIf="next==2" text-center padding   [formGroup]="new_form" (ngSubmit)="newPass()">
    <ion-item>
      <ion-label   color="primary" floating translate>
        register_pag.password
      </ion-label>
      <ion-input type="password" clearInput  formControlName="mot_de_pass"></ion-input>
    </ion-item>
    <div *ngIf="new_form.controls.mot_de_pass.errors && (new_form.controls.mot_de_pass.dirty || new_form.controls.mot_de_pass.touched)">
      <p ion-text
         *ngIf="new_form.controls.mot_de_pass.errors.required"
         color="danger"
         text-left
         translate
      >
        register_pag.password_required
      </p>
      <p ion-text
         *ngIf="new_form.controls.mot_de_pass.errors.minlength"
         color="danger"
         text-left
         translate
         [translateParams]="{val:(new_form.controls.mot_de_pass.errors.minlength.requiredLength - new_form.controls.mot_de_pass.errors.minlength.actualLength)}"

      >
        register_pag.password_min
      </p>
    </div>

    <ion-item>
      <ion-label   color="primary" floating translate>
        register_pag.confirm_password
      </ion-label>
      <ion-input type="password" clearInput  formControlName="mot_de_pass_confirm"></ion-input>
    </ion-item>
    <div *ngIf="new_form.controls.mot_de_pass_confirm.errors &&
                (new_form.controls.mot_de_pass_confirm.dirty
                || new_form.controls.mot_de_pass_confirm.touched
                || new_form.controls.mot_de_pass.touched
                )">
      <p ion-text
         *ngIf="new_form.controls.mot_de_pass_confirm.errors.MatchPassword"
         color="danger"
         text-left
         translate
      >
        register_pag.confirmed_error
      </p>

    </div>

    <button ion-button block [disabled]="!new_form.valid">{{"password_reset_pag.reset"|translate}}</button>
  </form>
</ion-footer>
